# 闭包

## 闭包的解释

函数执行时形成私有上下文，正常情况下，代码执行完后会出栈释放，但是特殊情况下，当前私有上下文的被上下文以外的事物占用了，则上下文不回出栈释放，从而形成不销毁的上下文。

我们把函数执行形成私有上下文，来【保护】和【保存】私有变量机制称为闭包

## 作用域

作用域在函数定义时就确定好了。分为全局作用域、函数作用域。

## 作用域链

如果函数内的作用域没有找到相关变量，就要到上层作用域中查找，直到全局作用域。
这个一层一层查找的路径，就构成了作用域链。

要到创建这个函数的那个作用域中取值——是“创建”，而不是“调用”，切记切记。


## 代码执行

代码执行的2个阶段：预编译阶段和执行阶段

在预编译阶段处理的工作是：
- 变量声明
- 变量提升，初始值都是 underfined
- 对非表达式的函数声明进行变量提升

函数的提升优先级高于变量的提升

## 执行上下文

函数执行时，会创建执行上下文。执行上下文包括
- 变量对象
- 作用域链
- this

## 参考

- https://www.cnblogs.com/wangfupeng1988/p/3992795.html
